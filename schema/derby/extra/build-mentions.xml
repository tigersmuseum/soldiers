<?xml version="1.0"?>

<project name="Soldiers Database" default="mentions" basedir=".">

	<description>
		Relating soldiers to sources.
	</description>

	<property file="../ant.properties"/>

	<path id="derby.path">
		<pathelement location="${DERBY_HOME}/lib/derby.jar"/>
		<pathelement location="${DERBY_HOME}/lib/derbyclient.jar"/>
	</path>


	<target name="mentions">
		<sql src="mentions.sql" driver="${driver}" url="${jdbc}" userid="${userid}" password="${password}" print="true" onerror="continue">	
			<classpath refid="derby.path"/>
		</sql>		
	</target>
			
	<target name="import-mentions">
		<sql driver="${driver}" url="${jdbc}" userid="${userid}" password="${password}" print="true" onerror="continue">	
		<![CDATA[
		CALL SYSCS_UTIL.SYSCS_IMPORT_DATA
		(NULL, 'MENTIONS', 'SID,SOURCE,SOURCEREF,TYPE', null, 'C:\Users\Archive\Documents\GitHub\soldiers-java\lonlist.csv', null, null, null, 0)
		]]>
		<classpath refid="derby.path"/>
		</sql>		
	</target>
		
	<target name="scratch-mentions">
		<echo>${jdbc}</echo>
		<sql driver="${driver}" url="${jdbc}" userid="${userid}" password="${password}" print="true" onerror="continue">	
		<![CDATA[

		select SID, count(*) from MENTIONS group by SID order by 2 desc fetch first 10 rows only;
			
		 --select * from MENTIONS where SID in (170072, 104022, 191266, 186975)
			
		-- select distinct SOURCE from MENTIONS

		]]>		
	 	<classpath refid="derby.path"/>
		</sql>		
	</target>
	
</project>
